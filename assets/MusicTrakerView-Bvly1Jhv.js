import{_ as p,c as n,a as s,z as a,w as l,C as u,f as g,F as b,l as h,o as i,n as y,t as d}from"./index-CB8rq1J_.js";import{u as f}from"./wavesurfer.esm-C5Vxh-qJ.js";/**!
 * audioMotion-analyzer
 * High-resolution real-time graphic audio spectrum analyzer JS module
 *
 * @version 4.5.0
 * @author  Henrique Avila Vianna <hvianna@gmail.com> <https://henriquevianna.com>
 * @license AGPL-3.0-or-later
 */Array.prototype.findLastIndex||(Array.prototype.findLastIndex=function(o){let e=this.length;for(;e-- >0;)if(o(this[e]))return e;return-1});const c={class:"max-w-3xl mx-auto p-6 bg-gray-100 rounded-lg shadow-md"},T={class:"mb-4"},x={class:"block text-gray-700 font-medium mb-2"},S={key:0,class:"mb-6 mt-12"},v=["src"],w={class:"flex gap-4 mt-12"},k={class:"mt-4"},A={class:"block text-gray-700 font-medium mb-2"},C={class:"block text-gray-700 font-medium mb-2"},E={class:"space-y-4"},U=["onClick"],L={class:"text-gray-600 italic"},F={data(){return{audioUrl:"http://127.0.0.1:8000/play",audioLoaded:!1,segments:[],startTime:null,endTime:null,currentText:{text:"",translation:""},currentTime:0}},methods:{loadAudio(){this.audioLoaded=!0,this.$nextTick(()=>{f.create({container:"#waveform",waveColor:"#4F4A85",progressColor:"#383351",url:this.audioUrl,cache:"default",mode:"cors",method:"GET",credentials:"same-origin",redirect:"follow",referrer:"client",headers:[{key:"Authorization",value:"my-token"}]})})},setStartTime(){const o=this.$refs.audioPlayer;this.startTime=o.currentTime},setEndTime(){const o=this.$refs.audioPlayer;this.endTime=o.currentTime,o.pause()},addSegment(){if(this.startTime!==null&&this.endTime!==null){const o=(this.endTime-this.startTime).toFixed(2);o>0&&(this.segments.push({start_at:parseFloat(this.startTime.toFixed(2)),duration:parseFloat(o),text:this.currentText.text,translation:this.currentText.translation}),this.startTime=null,this.endTime=null,this.currentText={text:"",translation:""})}},playSegment(o){const e=this.$refs.audioPlayer;e.currentTime=o,e.play()},updateSegmentHighlight(){const o=this.$refs.audioPlayer;this.currentTime=o.currentTime},isActiveSegment(o){return this.currentTime>=o.start_at&&this.currentTime<=o.start_at+o.duration},async sendSegments(){const o="https://your-server-url.com/api/segments";try{(await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.segments)})).ok?console.log("Segments sent successfully!"):console.log("Failed to send segments.")}catch(e){console.error("Error sending segments:",e)}}}},V=Object.assign(F,{__name:"MusicTrakerView",setup(o){return(e,t)=>(i(),n("div",c,[t[13]||(t[13]=s("h1",{class:"text-2xl font-bold text-center mb-4"},"Audio Editor",-1)),s("div",T,[s("label",x,[t[9]||(t[9]=a(" Audio URL: ")),l(s("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>e.audioUrl=r),placeholder:"Enter audio URL",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300"},null,512),[[u,e.audioUrl]])]),s("button",{onClick:t[1]||(t[1]=(...r)=>e.loadAudio&&e.loadAudio(...r)),class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"}," Load Audio ")]),e.audioLoaded?(i(),n("div",S,[s("audio",{style:{position:"relative","z-index":"999999"},ref:"audioPlayer",src:e.audioUrl,controls:"",class:"w-full mb-4",onTimeupdate:t[2]||(t[2]=(...r)=>e.updateSegmentHighlight&&e.updateSegmentHighlight(...r))},null,40,v),t[12]||(t[12]=s("div",{style:{"margin-top":"-100px"}},[s("div",{style:{width:"459px","margin-left":"60px"},id:"waveform"})],-1)),s("div",w,[s("button",{onClick:t[3]||(t[3]=(...r)=>e.setStartTime&&e.setStartTime(...r)),class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," Set Start "),s("button",{onClick:t[4]||(t[4]=(...r)=>e.setEndTime&&e.setEndTime(...r)),class:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600"}," Set End ")]),s("div",k,[s("label",A,[t[10]||(t[10]=a(" Text: ")),l(s("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>e.currentText.text=r),placeholder:"Enter text",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300"},null,512),[[u,e.currentText.text]])]),s("label",C,[t[11]||(t[11]=a(" Translation: ")),l(s("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>e.currentText.translation=r),placeholder:"Enter translation",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-300"},null,512),[[u,e.currentText.translation]])]),s("button",{onClick:t[7]||(t[7]=(...r)=>e.addSegment&&e.addSegment(...r)),class:"bg-purple-500 text-white px-4 py-2 rounded-md hover:bg-purple-600"}," Add Segment ")])])):g("",!0),t[14]||(t[14]=s("h2",{class:"text-xl font-semibold mt-6 mb-4"},"Segments",-1)),s("ul",E,[(i(!0),n(b,null,h(e.segments,(r,m)=>(i(),n("li",{key:m,onClick:P=>e.playSegment(r.start_at),class:y([{"bg-green-100":e.isActiveSegment(r)},"p-4 bg-white rounded-md shadow-md border border-gray-200 cursor-pointer hover:bg-gray-50"])},[s("strong",null,d(r.start_at)+"s - "+d(r.duration)+"s:",1),s("p",null,d(r.text),1),s("p",L,d(r.translation),1)],10,U))),128))]),s("button",{onClick:t[8]||(t[8]=(...r)=>e.sendSegments&&e.sendSegments(...r)),class:"mt-6 bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600"}," Send to Server ")]))}}),N=p(V,[["__scopeId","data-v-c6a56dd2"]]);export{N as default};
